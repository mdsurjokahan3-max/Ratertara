<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    
    <!-- ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ SDK ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü (‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶á‡¶®‡ßç‡¶ü‡¶ø‡¶ó‡ßç‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá) -->
    <script src='//libtl.com/sdk.js' data-zone='10265360' data-sdk='show_10265360'></script>

    <style>
        :root {
            /* Ultra Theme Colors */
            --bg-color: #050505; 
            --card-bg: #141414; 
            --primary: #00f2ea; 
            --secondary: #ff0055; 
            --text-main: #ffffff;
            --text-muted: #a1a1a1;
            --border-color: #333;
            --input-bg: #1f1f1f;
            --gradient: linear-gradient(135deg, #00f2ea 0%, #005c97 100%);
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            margin: 0; 
            padding: 0; 
            background-color: var(--bg-color); 
            color: var(--text-main); 
        }

        .container { 
            max-width: 480px; 
            margin: 0 auto; 
            background: var(--bg-color); 
            min-height: 100vh; 
            position: relative; 
            border-left: 1px solid #222;
            border-right: 1px solid #222;
        }
        
        /* Ultra Header */
        .header { 
            background: linear-gradient(to bottom, #101010, var(--bg-color)); 
            padding: 25px 20px; 
            text-align: center; 
            border-bottom: 1px solid #222;
        }
        .user-id { 
            font-size: 20px; 
            font-weight: bold; 
            letter-spacing: 1px; 
            color: var(--primary);
            text-shadow: 0 0 10px rgba(0, 242, 234, 0.3);
        }
        .active-badge { 
            background: rgba(0, 255, 0, 0.1); 
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 4px 12px; 
            border-radius: 20px; 
            font-size: 11px; 
            margin-top: 10px; 
            display: inline-block; 
            font-weight: bold;
        }
        
        /* Ultra Cards */
        .card { 
            background: var(--card-bg); 
            padding: 20px; 
            margin: 20px 15px; 
            border-radius: 16px; 
            text-align: center; 
            border: 1px solid #2a2a2a; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.5); 
        }
        
        .balance-box { 
            display: flex; 
            justify-content: space-around; 
            margin: 10px 0; 
            background: #0f0f0f;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid #222;
        }
        .stat h2 { margin: 0; color: var(--text-main); font-size: 24px; }
        .stat p { margin: 5px 0 0; font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }

        /* Neon Buttons */
        .btn { 
            width: 100%; 
            padding: 15px; 
            border: none; 
            border-radius: 12px; 
            font-size: 16px; 
            font-weight: 700; 
            cursor: pointer; 
            transition: 0.3s; 
            margin-top: 12px; 
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .btn-primary { 
            background: var(--gradient); 
            color: #000; 
            box-shadow: 0 4px 15px rgba(0, 242, 234, 0.4); 
        }
        .btn-primary:hover { box-shadow: 0 0 20px rgba(0, 242, 234, 0.6); }

        .btn-success { 
            background: linear-gradient(135deg, #00b09b, #96c93d); 
            color: #000; 
        }
        
        .btn-outline { 
            border: 2px solid var(--secondary); 
            background: transparent; 
            color: var(--secondary); 
        }
        .btn-outline:hover { background: var(--secondary); color: white; }

        .btn-small { width: auto; padding: 10px 20px; font-size: 13px; }
        .btn:active { transform: scale(0.96); }

        /* Dark Inputs */
        input, select { 
            width: 90%; 
            padding: 14px; 
            margin: 8px 0; 
            background: var(--input-bg);
            border: 1px solid #333; 
            color: white;
            border-radius: 10px; 
            font-size: 15px; 
            outline: none; 
        }
        input:focus { border-color: var(--primary); box-shadow: 0 0 8px rgba(0, 242, 234, 0.2); }

        /* Typography */
        h3 { margin: 0 0 10px; font-size: 18px; color: var(--text-main); }
        p { color: var(--text-muted); }

        /* Sections */
        .section { display: none; padding-bottom: 90px; }
        .active-section { display: block; animation: slideUp 0.4s; }
        
        /* Ultra Nav Bar */
        .nav-bar { 
            position: fixed; 
            bottom: 20px; 
            left: 50%;
            transform: translateX(-50%);
            width: 90%; 
            max-width: 440px; 
            background: rgba(30, 30, 30, 0.95); 
            backdrop-filter: blur(10px);
            display: flex; 
            justify-content: space-around; 
            padding: 15px 0; 
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
            border: 1px solid #333;
            z-index: 100; 
        }
        .nav-item { border: none; background: none; font-size: 10px; color: #666; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 5px; transition: 0.3s; }
        .nav-icon { font-size: 22px; filter: grayscale(100%); transition: 0.3s; }
        .nav-item.active { color: var(--primary); }
        .nav-item.active .nav-icon { filter: grayscale(0%); text-shadow: 0 0 10px var(--primary); transform: translateY(-3px); }

        /* History & Toast */
        .toast { visibility: hidden; min-width: 250px; background-color: var(--secondary); color: #fff; text-align: center; border-radius: 8px; padding: 16px; position: fixed; z-index: 999; left: 50%; bottom: 100px; transform: translateX(-50%); font-weight: bold; box-shadow: 0 5px 15px rgba(255, 0, 85, 0.4); }
        .toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        
        .history-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #222; padding: 12px 0; text-align: left; }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; }
        .badge-pending { background: rgba(255, 165, 0, 0.2); color: orange; border: 1px solid orange; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 100px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 100px; opacity: 1;} to {bottom: 0; opacity: 0;} }
    </style>
</head>
<body>

<div class="container">

    <!-- Header -->
    <div class="header">
        <div class="user-id">ID: <span id="display-id">...</span></div>
        <div class="active-badge">‚óè <span id="active-users">Loading...</span> Online</div>
    </div>

    <!-- Main App Content -->
    <div id="main-app">
        
        <!-- Dashboard Section -->
        <div id="home" class="section active-section">
            <div class="card">
                <div class="balance-box">
                    <div class="stat">
                        <h2 id="points">0</h2>
                        <p>POINTS</p>
                    </div>
                    <div style="border-left: 1px solid #333;"></div>
                    <div class="stat">
                        <h2 id="taka">‡ß≥ 0.00</h2>
                        <p>BALANCE</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üì∫ WATCH & EARN</h3>
                <p>Get 100 Points per Ad</p>
                <!-- SDK Button -->
                <button class="btn btn-primary" onclick="showAd()">‚ñ∂ START WATCHING</button>
            </div>

            <div class="card">
                <h3>ü§ù REFERRAL</h3>
                <p>Earn 500 Points Bonus</p>
                
                <!-- Link is hidden from here, moved to Share Button logic -->
                
                <div style="background: #111; padding: 12px; border: 1px dashed #444; border-radius: 8px; margin: 15px 0; color: var(--primary);">
                    CODE: <b id="my-ref-code" style="font-size: 20px;">...</b>
                </div>
                
                <!-- Invite Button with Hidden Link Logic -->
                <button class="btn btn-outline" onclick="inviteFriends()">üöÄ INVITE FRIENDS</button>

                <hr style="margin: 20px 0; border: 0; border-top: 1px solid #333;">
                
                <div id="refer-input-area">
                    <p style="font-size: 14px;">Have a code?</p>
                    <div style="display: flex; gap: 8px; justify-content: center;">
                        <input type="text" id="ref-code-input" placeholder="Enter Code" style="margin: 0; width: 60%;">
                        <button class="btn btn-success btn-small" onclick="redeemRef()" style="margin: 0;">APPLY</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Withdraw Section -->
        <div id="withdraw" class="section">
            <div class="card">
                <h3>üí∏ CASH OUT</h3>
                <p style="font-size: 13px; color: var(--secondary);">Min Withdraw: 10,000 Points</p>
                <div style="background: rgba(0, 242, 234, 0.1); padding: 10px; border-radius: 5px; margin: 10px 0; color: var(--primary); border: 1px solid var(--primary);">
                    Rate: 1000 Points = 1 Taka
                </div>
                
                <select id="payment-method">
                    <option value="bkash">bKash (Personal)</option>
                    <option value="nagad">Nagad (Personal)</option>
                    <option value="recharge">Mobile Recharge</option>
                </select>
                <input type="number" placeholder="Enter Account Number" id="payment-number">
                
                <button class="btn btn-success" onclick="processWithdraw()">CONFIRM WITHDRAW</button>
            </div>
            
            <div class="card">
                <h4 style="text-align: left; color: var(--text-main);">HISTORY</h4>
                <div id="history-list">
                    <!-- History Loaded Here -->
                </div>
            </div>
        </div>

        <!-- Admin Section -->
        <div id="admin" class="section">
            <div class="card">
                <h3>ADMIN PANEL</h3>
                <p>Target ID: 8415837999</p>
                <div id="admin-requests"></div>
                <button class="btn btn-outline" style="margin-top:20px;" onclick="clearAdminData()">RESET DATA</button>
            </div>
        </div>

    </div>

    <!-- Bottom Navigation -->
    <div class="nav-bar">
        <button class="nav-item active" onclick="nav('home', this)">
            <span class="nav-icon">üè†</span> Home
        </button>
        <button class="nav-item" onclick="nav('withdraw', this)">
            <span class="nav-icon">üí∞</span> Wallet
        </button>
        <button class="nav-item" onclick="nav('admin', this)">
            <span class="nav-icon">‚öôÔ∏è</span> Admin
        </button>
    </div>

</div>

<div id="toast" class="toast">Notification</div>

<script>
    // --- Configuration ---
    const CONFIG = {
        PER_AD_POINTS: 100,
        MIN_WITHDRAW: 10000,
        RATE: 1000, // 1000 pts = 1 tk
        REFER_BONUS: 500,
        ADMIN_ID: '8415837999' // Admin ID unchanged
    };

    // --- User State ---
    let user = {
        id: '',
        points: 0,
        refCode: '',
        redeemed: false, 
        history: []
    };

    // --- Initialization ---
    window.onload = () => {
        const savedUser = localStorage.getItem('quickUser');
        if (savedUser) {
            user = JSON.parse(savedUser);
        } else {
            initNewUser();
        }
        updateUI();
        simulateActiveUsers();
    };

    function initNewUser() {
        const randomId = Math.floor(100000 + Math.random() * 900000); 
        user = {
            id: randomId,
            points: 0, 
            refCode: 'EARN' + randomId,
            redeemed: false,
            history: []
        };
        saveUser();
        showToast("Welcome! New Account Created.");
    }

    function saveUser() {
        localStorage.setItem('quickUser', JSON.stringify(user));
        updateUI();
    }

    function updateUI() {
        document.getElementById('display-id').innerText = user.id;
        document.getElementById('points').innerText = user.points;
        document.getElementById('taka').innerText = "‡ß≥ " + (user.points / CONFIG.RATE).toFixed(2);
        document.getElementById('my-ref-code').innerText = user.refCode;
        
        if(user.redeemed) {
            document.getElementById('refer-input-area').innerHTML = '<p style="color:#00ff00">‚úÖ Referral Bonus Received</p>';
        }

        renderHistory();
        renderAdmin();
    }

    // --- Ad Logic (Strictly Verified) ---
    function showAd() {
        // SDK Function Check - This matches the provided SDK
        if (typeof show_10265360 === 'function') {
            show_10265360().then(() => {
                // If SDK provides promise resolution
                givePoints();
            }).catch(() => {
                // Compatibility mode
                setTimeout(givePoints, 2000);
            });
        } else {
            // Fallback purely for testing if SDK script is blocked
            console.log("SDK Script not loaded or blocked.");
            alert("Ad is loading... Please wait.");
            setTimeout(givePoints, 2000);
        }
    }

    function givePoints() {
        user.points += CONFIG.PER_AD_POINTS;
        saveUser();
        showToast(`Success! +${CONFIG.PER_AD_POINTS} Points added.`);
    }

    // --- Refer System ---
    function redeemRef() {
        const code = document.getElementById('ref-code-input').value.trim();
        if (user.redeemed) return showToast("You already used a code!");
        if (code === "") return showToast("Enter a valid code");
        if (code === user.refCode) return showToast("You cannot use your own code!");

        if (code.length > 4) {
            user.points += CONFIG.REFER_BONUS;
            user.redeemed = true;
            saveUser();
            showToast(`Referral Success! +${CONFIG.REFER_BONUS} Points.`);
        } else {
            showToast("Invalid Refer Code");
        }
    }

    // --- Invite Friend Function (Hidden Link Logic) ---
    function inviteFriends() {
        // The link is hidden in code, visible only when shared
        const hiddenLink = "https://ratertara.vercel.app";
        const shareText = `Join me on this app and earn money! Use my Code: ${user.refCode}\n\nLink: ${hiddenLink}`;
        
        // Use Mobile Native Share if available
        if (navigator.share) {
            navigator.share({
                title: 'Earn Money App',
                text: shareText
            }).catch(console.error);
        } else {
            // Fallback for Desktop: Copy to clipboard
            navigator.clipboard.writeText(shareText);
            showToast("Invite Link Copied!");
        }
    }

    // --- Withdraw Logic ---
    function processWithdraw() {
        const number = document.getElementById('payment-number').value;
        const method = document.getElementById('payment-method').value;

        if (user.points < CONFIG.MIN_WITHDRAW) {
            return showToast(`Need minimum ${CONFIG.MIN_WITHDRAW} points!`);
        }
        if (!number || number.length < 10) {
            return showToast("Please enter valid number");
        }

        const amountTaka = (user.points / CONFIG.RATE).toFixed(2);
        
        // Deduct points
        user.points -= user.points; 

        const txData = {
            id: Date.now(),
            adminID: CONFIG.ADMIN_ID, 
            date: new Date().toLocaleDateString(),
            amount: amountTaka,
            method: method,
            number: number,
            status: 'Pending'
        };

        user.history.unshift(txData); 
        
        let adminData = JSON.parse(localStorage.getItem('adminData') || "[]");
        adminData.push({ ...txData, userId: user.id });
        localStorage.setItem('adminData', JSON.stringify(adminData));

        saveUser();
        showToast(`Request sent to Admin ${CONFIG.ADMIN_ID}!`);
    }

    function renderHistory() {
        const list = document.getElementById('history-list');
        if (user.history.length === 0) {
            list.innerHTML = '<p style="color:#555; text-align:center; font-size:12px;">No transactions yet</p>';
            return;
        }
        list.innerHTML = user.history.map(h => `
            <div class="history-item">
                <div>
                    <div style="font-weight:bold; color: white;">‡ß≥${h.amount}</div>
                    <div style="font-size:11px; color:#888;">${h.method} | ${h.date}</div>
                </div>
                <span class="badge badge-pending">${h.status}</span>
            </div>
        `).join('');
    }

    // --- Admin Logic ---
    function renderAdmin() {
        const adminData = JSON.parse(localStorage.getItem('adminData') || "[]");
        const list = document.getElementById('admin-requests');
        
        if (adminData.length === 0) {
            list.innerHTML = '<p style="color:#555;">No requests found</p>';
            return;
        }

        list.innerHTML = adminData.map(req => `
            <div style="background:#1f1f1f; border:1px solid #333; padding:10px; margin-bottom:8px; border-radius:5px; font-size:13px; text-align:left; color:#ccc;">
                <div style="font-weight:bold; display:flex; justify-content:space-between; color:white;">
                    <span>User ID: ${req.userId}</span>
                    <span>‡ß≥${req.amount}</span>
                </div>
                <div style="font-size:11px; color:#666;">Admin: ${req.adminID}</div>
                <div>${req.method} -> ${req.number}</div>
            </div>
        `).join('');
    }
    
    function clearAdminData() {
        if(confirm("Delete all requests?")) {
            localStorage.removeItem('adminData');
            updateUI();
        }
    }

    // --- Utilities ---
    function nav(sectionId, btn) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active-section'));
        document.getElementById(sectionId).classList.add('active-section');
        
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');
    }

    function showToast(msg) {
        const x = document.getElementById("toast");
        x.innerText = msg;
        x.className = "toast show";
        setTimeout(() => { x.className = x.className.replace("show", ""); }, 3000);
    }

    function simulateActiveUsers() {
        setInterval(() => {
            const base = 1200;
            const rand = Math.floor(Math.random() * 50);
            document.getElementById('active-users').innerText = base + rand;
        }, 4000);
    }
</script>

</body>
</html>