<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pro Earn App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Monetag Script -->
    <script src='//libtl.com/sdk.js' data-zone='10250809' data-sdk='show_10250809'></script>
    <!-- à¦†à¦‡à¦•à¦¨à§‡à¦° à¦œà¦¨à§à¦¯ FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary: #00d2ff; --secondary: #3a7bd5; --bg: #121212; --card: #1e1e1e; }
        body { background-color: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; padding-bottom: 80px; }
        
        /* Header & Profile */
        .profile-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 25px; }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .avatar { width: 45px; height: 45px; background: linear-gradient(45deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 18px; }
        .details h4 { margin: 0; font-size: 16px; }
        .details span { font-size: 12px; color: #aaa; }
        
        /* Dashboard Cards */
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .stat-card { background: var(--card); padding: 15px; border-radius: 12px; text-align: center; border: 1px solid #333; }
        .stat-value { font-size: 20px; font-weight: bold; color: var(--primary); margin-top: 5px; }
        .stat-label { font-size: 12px; color: #888; }

        /* Main Action Button */
        .earn-btn { background: linear-gradient(90deg, #11998e, #38ef7d); width: 100%; padding: 18px; border: none; border-radius: 12px; color: white; font-size: 18px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 25px; box-shadow: 0 5px 15px rgba(56, 239, 125, 0.3); }
        .earn-btn:active { transform: scale(0.98); }

        /* Menu List */
        .menu-list { background: var(--card); border-radius: 15px; overflow: hidden; }
        .menu-item { display: flex; align-items: center; padding: 15px 20px; border-bottom: 1px solid #333; cursor: pointer; transition: 0.2s; }
        .menu-item:last-child { border-bottom: none; }
        .menu-item:active { background: #2a2a2a; }
        .icon-box { width: 35px; height: 35px; background: #2a2a2a; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px; color: var(--primary); }
        .menu-text { flex-grow: 1; font-size: 14px; }
        .arrow { color: #555; }

        /* Referral Section */
        .ref-box { background: #222; padding: 15px; border-radius: 10px; margin-top: 20px; border: 1px dashed #555; text-align: center; }
        .ref-link { color: var(--primary); font-size: 12px; word-break: break-all; margin: 10px 0; background: #000; padding: 8px; border-radius: 5px; }
        .copy-btn { background: #333; color: #fff; border: none; padding: 5px 15px; border-radius: 5px; font-size: 12px; }

        /* Withdraw Modal (Simple) */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); align-items: center; justify-content: center; z-index: 100; }
        .modal-content { background: #1e1e1e; padding: 25px; border-radius: 15px; width: 80%; text-align: center; }
        .input-field { width: 100%; padding: 10px; margin: 10px 0; background: #333; border: none; color: white; border-radius: 5px; }
    </style>
</head>
<body>

    <!-- Profile Header -->
    <div class="profile-header">
        <div class="user-info">
            <div class="avatar" id="avatar">U</div>
            <div class="details">
                <h4 id="username">Guest</h4>
                <span>ID: <span id="userid">...</span></span>
            </div>
        </div>
        <div style="background: #2a2a2a; padding: 5px 10px; border-radius: 20px; font-size: 12px;">
            ðŸ’Ž Pro Member
        </div>
    </div>

    <!-- Stats -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-label">Wallet Balance</div>
            <div class="stat-value">$<span id="balance">0.00</span></div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Total Referrals</div>
            <div class="stat-value" id="ref-count">0</div>
        </div>
    </div>

    <!-- Main Task -->
    <button class="earn-btn" onclick="showAd()">
        <i class="fas fa-play-circle"></i> Watch Ad & Earn
    </button>

    <!-- Menu -->
    <div class="menu-list">
        <div class="menu-item" onclick="openWithdraw()">
            <div class="icon-box"><i class="fas fa-wallet"></i></div>
            <div class="menu-text">Withdraw Money</div>
            <div class="arrow">></div>
        </div>
        <div class="menu-item" onclick="window.Telegram.WebApp.openTelegramLink('https://t.me/YOUR_CHANNEL_LINK')">
            <div class="icon-box"><i class="fab fa-telegram"></i></div>
            <div class="menu-text">Join Our Channel</div>
            <div class="arrow">></div>
        </div>
        <div class="menu-item" onclick="window.Telegram.WebApp.openTelegramLink('https://t.me/YOUR_GROUP_LINK')">
            <div class="icon-box"><i class="fas fa-users"></i></div>
            <div class="menu-text">Join Community Group</div>
            <div class="arrow">></div>
        </div>
    </div>

    <!-- Referral Section -->
    <div class="ref-box">
        <h4>ðŸ“¢ Invite Friends & Earn $0.10</h4>
        <div class="ref-link" id="ref-link">Loading...</div>
        <button class="copy-btn" onclick="copyRef()">Copy Link</button>
    </div>

    <!-- Withdraw Modal -->
    <div class="modal" id="withdrawModal">
        <div class="modal-content">
            <h3>Withdraw Funds</h3>
            <p>Min Withdraw: $5.00</p>
            <input type="number" id="w-amount" class="input-field" placeholder="Amount ($)">
            <input type="text" id="w-number" class="input-field" placeholder="Bkash/Nagad Number">
            <br>
            <button class="earn-btn" onclick="submitWithdraw()" style="margin-bottom: 10px;">Submit</button>
            <button class="copy-btn" onclick="closeWithdraw()" style="background: red;">Cancel</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // URL à¦¥à§‡à¦•à§‡ à¦¡à¦¾à¦Ÿà¦¾ à¦¨à§‡à¦“à§Ÿà¦¾ (Python Bot à¦ªà¦¾à¦ à¦¾à¦¬à§‡)
        const urlParams = new URLSearchParams(window.location.search);
        const currentBalance = urlParams.get('bal') || '0.00';
        const totalRefs = urlParams.get('refs') || '0';
        
        // UI à¦†à¦ªà¦¡à§‡à¦Ÿ
        const user = tg.initDataUnsafe.user;
        if (user) {
            document.getElementById('username').innerText = user.first_name;
            document.getElementById('userid').innerText = user.id;
            document.getElementById('avatar').innerText = user.first_name.charAt(0);
            
            // à¦°à§‡à¦«à¦¾à¦° à¦²à¦¿à¦‚à¦• à¦¤à§ˆà¦°à¦¿
            const botUsername = "@Bangladeshi_Income_bot"; // à¦à¦Ÿà¦¿ à¦ªà¦°à§‡ à¦šà§‡à¦žà§à¦œ à¦•à¦°à¦¬à§‡ à¦¨à¦¾ à¦¹à¦²à§‡ à¦•à¦¾à¦œ à¦•à¦°à¦¬à§‡ à¦¨à¦¾
            document.getElementById('ref-link').innerText = `https://t.me/${botUsername}?start=${user.id}`;
        }

        document.getElementById('balance').innerText = currentBalance;
        document.getElementById('ref-count').innerText = totalRefs;

        // à¦«à¦¾à¦‚à¦¶à¦¨à¦¸
        function showAd() {
            if (typeof show_10250809 === 'function') {
                show_10250809().then(() => {
                    tg.sendData(JSON.stringify({type: "ad_watched"}));
                    tg.close();
                });
            } else {
                alert("Simulating Ad...");
                tg.sendData(JSON.stringify({type: "ad_watched"}));
                tg.close();
            }
        }

        function copyRef() {
            const text = document.getElementById('ref-link').innerText;
            navigator.clipboard.writeText(text);
            alert("Referral Link Copied!");
        }

        // Withdraw Logic
        function openWithdraw() { document.getElementById('withdrawModal').style.display = 'flex'; }
        function closeWithdraw() { document.getElementById('withdrawModal').style.display = 'none'; }
        
        function submitWithdraw() {
            const amount = document.getElementById('w-amount').value;
            const number = document.getElementById('w-number').value;
            
            if(amount < 5) { alert("Minimum withdraw $5"); return; }
            if(!number) { alert("Enter Number"); return; }

            const data = {
                type: "withdraw",
                amount: amount,
                number: number
            };
            tg.sendData(JSON.stringify(data));
            tg.close();
        }
    </script>
</body>
</html>